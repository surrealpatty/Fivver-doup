{"version":3,"sources":["../../../src/routes/profile.ts"],"sourcesContent":["import express, { Request, Response } from 'express';\r\nimport { authenticateToken } from '../middlewares/authMiddleware';\r\nimport { User } from '../models/user'; // Correct\r\n\r\nconst router = express.Router();\r\n\r\n// Route to fetch the user's profile data\r\nrouter.get(\r\n  '/',\r\n  authenticateToken,\r\n  async (req: Request, res: Response): Promise<void> => {\r\n    const userId = req.user?.id;\r\n\r\n    if (!userId) {\r\n      res.status(400).json({ message: 'User ID is missing or invalid' });\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const userProfile = await User.findByPk(userId);\r\n\r\n      if (!userProfile) {\r\n        res.status(404).json({ message: 'User profile not found' });\r\n        return;\r\n      }\r\n\r\n      res.status(200).json({\r\n        message: 'Profile data fetched successfully',\r\n        profile: {\r\n          id: userProfile.id,\r\n          username: userProfile.username,\r\n          email: userProfile.email,\r\n        },\r\n      });\r\n    } catch (error) {\r\n      console.error('Error fetching profile:', error);\r\n      res.status(500).json({ message: 'Internal server error' });\r\n    }\r\n  }\r\n);\r\n\r\nexport default router;\r\n"],"names":["router","express","Router","get","authenticateToken","req","res","userId","user","id","status","json","message","userProfile","User","findByPk","profile","username","email","error","console"],"mappings":";;;;+BAyCA;;;eAAA;;;gEAzC2C;gCACT;sBACb;;;;;;AAErB,MAAMA,SAASC,gBAAO,CAACC,MAAM;AAE7B,yCAAyC;AACzCF,OAAOG,GAAG,CACR,KACAC,iCAAiB,EACjB,OAAOC,KAAcC;IACnB,MAAMC,SAASF,IAAIG,IAAI,EAAEC;IAEzB,IAAI,CAACF,QAAQ;QACXD,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;YAAEC,SAAS;QAAgC;QAChE;IACF;IAEA,IAAI;QACF,MAAMC,cAAc,MAAMC,UAAI,CAACC,QAAQ,CAACR;QAExC,IAAI,CAACM,aAAa;YAChBP,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;gBAAEC,SAAS;YAAyB;YACzD;QACF;QAEAN,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;YACnBC,SAAS;YACTI,SAAS;gBACPP,IAAII,YAAYJ,EAAE;gBAClBQ,UAAUJ,YAAYI,QAAQ;gBAC9BC,OAAOL,YAAYK,KAAK;YAC1B;QACF;IACF,EAAE,OAAOC,OAAO;QACdC,QAAQD,KAAK,CAAC,2BAA2BA;QACzCb,IAAII,MAAM,CAAC,KAAKC,IAAI,CAAC;YAAEC,SAAS;QAAwB;IAC1D;AACF;MAGF,WAAeZ"}