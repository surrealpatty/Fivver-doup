{"version":3,"sources":["../../../src/controllers/profileController.ts"],"sourcesContent":["// src/controllers/profileController.ts\r\nimport { UserCreationAttributes } from '../models/user';  // Correct import\r\nimport bcrypt from 'bcryptjs'; // Add bcrypt for password comparison\r\nimport { Request, Response } from 'express'; // Express types for request and response\r\nimport { Optional } from 'sequelize/types'; // Import Optional type from Sequelize\r\nimport { User } from '../models/user'; // Corrected import statement\r\n\r\n// Register user function\r\nexport const registerUser = async ({\r\n  username,\r\n  email,\r\n  password,\r\n}: {\r\n  username: string;\r\n  email: string;\r\n  password: string;\r\n}) => {\r\n  try {\r\n    // Hash the password before saving it\r\n    const hashedPassword = await bcrypt.hash(password, 10);\r\n\r\n    const userData: UserCreationAttributes = {\r\n      username: 'newuser',\r\n      email: 'user@example.com',\r\n      role: 'free',  // Add role as an optional field\r\n      password: hashedPassword, // Use hashed password\r\n    };\r\n    // Create the user with hashed password\r\n    const user = await User.create(userData);\r\n\r\n    return user; // Return the created user object\r\n  } catch (error: unknown) {\r\n    if (error instanceof Error) {\r\n      throw new Error('Error registering user: ' + error.message); // Return specific error message\r\n    }\r\n    throw new Error('Unknown error occurred during user registration'); // Fallback error message\r\n  }\r\n};\r\n"],"names":["registerUser","username","email","password","hashedPassword","bcrypt","hash","userData","role","user","User","create","error","Error","message"],"mappings":"AAAA,uCAAuC;;;;;+BAQ1BA;;;eAAAA;;;iEANM;sBAGE;;;;;;AAGd,MAAMA,eAAe,OAAO,EACjCC,QAAQ,EACRC,KAAK,EACLC,QAAQ,EAKT;IACC,IAAI;QACF,qCAAqC;QACrC,MAAMC,iBAAiB,MAAMC,iBAAM,CAACC,IAAI,CAACH,UAAU;QAEnD,MAAMI,WAAmC;YACvCN,UAAU;YACVC,OAAO;YACPM,MAAM;YACNL,UAAUC;QACZ;QACA,uCAAuC;QACvC,MAAMK,OAAO,MAAMC,UAAI,CAACC,MAAM,CAACJ;QAE/B,OAAOE,MAAM,iCAAiC;IAChD,EAAE,OAAOG,OAAgB;QACvB,IAAIA,iBAAiBC,OAAO;YAC1B,MAAM,IAAIA,MAAM,6BAA6BD,MAAME,OAAO,GAAG,gCAAgC;QAC/F;QACA,MAAM,IAAID,MAAM,oDAAoD,yBAAyB;IAC/F;AACF"}